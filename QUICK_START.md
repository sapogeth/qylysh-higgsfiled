# üöÄ –ë—ã—Å—Ç—Ä—ã–π –°—Ç–∞—Ä—Ç - –ê–ª–¥–∞—Ä –ö”©—Å–µ Generator

## ‚ö° –ó–∞–ø—É—Å–∫ –∑–∞ 3 –®–∞–≥–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
python3 test_face_consistency.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```
‚úÖ –í–°–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!
üöÄ –û–∂–∏–¥–∞–µ–º–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ª–∏—Ü–∞: 95%+
‚è±Ô∏è  –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ~6-7 —Å–µ–∫—É–Ω–¥/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
```

–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏ - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ [FACE_CONSISTENCY.md](FACE_CONSISTENCY.md)

---

### 2. –ó–∞–ø—É—Å–∫ –°–µ—Ä–≤–µ—Ä–∞

```bash
python3 app.py
```

**–í—ã —É–≤–∏–¥–∏—Ç–µ**:
```
======================================================================
ALDAR K√ñSE STORYBOARD GENERATOR
======================================================================

‚úì Using LOCAL Stable Diffusion XL for image generation
‚úì Character consistency based on reference images
‚úì Optimized for M1 MacBook Air

üìù Note: Model will load on first generation request (~1-2 min)
    Subsequent generations will be much faster (30-60 sec)

üöÄ Server starting on http://localhost:8080
======================================================================
```

---

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –ë—Ä–∞—É–∑–µ—Ä

```
http://localhost:8080
```

**–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤** (–∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ):
- üëë Aldar K√∂se and the Greedy Khan
- üê¥ Journey Across the Steppe
- üî• Stories by the Campfire

**–ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π**:
```
A greedy merchant refuses to share food with hungry travelers...
```

---

## üìä –¢–µ–∫—É—â–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### ‚úÖ –ß—Ç–æ –í–∫–ª—é—á–µ–Ω–æ:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ó–∞—á–µ–º |
|----------|----------|-------|
| **USE_IDENTITY_LOCK** | `True` ‚úÖ | –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ª–∏—Ü–∞ (95%+) |
| **IP_ADAPTER_SCALE** | `0.80` (HIGH) | –°—Ç—Ä–æ–≥–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—É |
| **NUM_INFERENCE_STEPS** | `20` | –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç—å/–∫–∞—á–µ—Å—Ç–≤–æ |
| **GUIDANCE_SCALE** | `7.5` | –¢–æ—á–Ω–æ—Å—Ç—å —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç—É |
| **USE_KARRAS_SIGMAS** | `False` | –°–∫–æ—Ä–æ—Å—Ç—å |
| **SKIP_SAFETY_CHECKER** | `True` | –°–∫–æ—Ä–æ—Å—Ç—å |

### ‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–∞—è –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

```
1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:  ~6-7 —Å–µ–∫—É–Ω–¥
6 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:  ~36-42 —Å–µ–∫—É–Ω–¥—ã
8 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:  ~48-56 —Å–µ–∫—É–Ω–¥
```

**–ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: +60-120 —Å–µ–∫—É–Ω–¥ (–∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏)
**–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ**: –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

---

## üéØ –ß—Ç–æ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –†–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

–ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, **–í–°–ï** –∫–∞–¥—Ä—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å:

### ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –õ–∏—Ü–æ:
- [ ] –£–∑–∫–∏–µ –º–∏–Ω–¥–∞–ª–µ–≤–∏–¥–Ω—ã–µ –≥–ª–∞–∑–∞
- [ ] –û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–µ —á—ë—Ä–Ω—ã–µ –≤–æ–ª–æ—Å—ã —Å –º–∞–ª–µ–Ω—å–∫–∏–º —Ö–æ—Ö–æ–ª–∫–æ–º
- [ ] –¢–æ–Ω–∫–∏–µ —á—ë—Ä–Ω—ã–µ —É—Å—ã
- [ ] –ò–¥–µ–∞–ª—å–Ω–æ –∫—Ä—É–≥–ª–æ–µ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ –ª–∏—Ü–æ

### ‚úÖ –û–¥–∏–Ω–∞–∫–æ–≤–∞—è –û–¥–µ–∂–¥–∞:
- [ ] –û—Ä–∞–Ω–∂–µ–≤—ã–π —á–∞–ø–∞–Ω —Å —É–∑–æ—Ä–∞–º–∏
- [ ] –í–æ–π–ª–æ—á–Ω–∞—è –∫–∞–ª–ø–∞–∫ (—à–ª—è–ø–∞)

### ‚úÖ –†–∞–∑–Ω—ã–µ –°—Ü–µ–Ω—ã:
- [ ] –ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–Ω—É—é —á–∞—Å—Ç—å –∏—Å—Ç–æ—Ä–∏–∏
- [ ] –ù–æ –ª–∏—Ü–æ –∏ –æ–¥–µ–∂–¥–∞ –û–î–ò–ù–ê–ö–û–í–´–ï

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "Token overflow" –∏–ª–∏ "156 > 77"
**–†–µ—à–µ–Ω–∏–µ**: –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! Prompt Enhancer –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å–µ–∫–∞–µ—Ç –¥–æ 75 —Ç–æ–∫–µ–Ω–æ–≤.

**–ü—Ä–æ–≤–µ—Ä–∫–∞**:
```bash
python3 test_kazakh_prompts.py
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–∏—Ü–∞ –≤—Å—ë –µ—â—ë —Ä–∞–∑–Ω—ã–µ

**–®–∞–≥ 1**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```bash
grep "USE_IDENTITY_LOCK\|IP_ADAPTER_SCALE" config.py
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```python
USE_IDENTITY_LOCK = True
IP_ADAPTER_SCALE = 0.80
```

**–®–∞–≥ 2**: –£–≤–µ–ª–∏—á—å—Ç–µ —Å–∏–ª—É IP-Adapter
```python
# config.py, —Å—Ç—Ä–æ–∫–∞ 190:
IP_ADAPTER_SCALE = 0.90  # –∏–ª–∏ –¥–∞–∂–µ 0.95
```

**–®–∞–≥ 3**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
# Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
python3 app.py
```

---

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ

**–¢–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å**: ~6-7 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ë–´–°–¢–†–ï–ï (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):

```python
# config.py:
USE_IDENTITY_LOCK = False  # –í—ã–∫–ª—é—á–∏—Ç—å IP-Adapter (-20% –≤—Ä–µ–º–µ–Ω–∏)
NUM_INFERENCE_STEPS = 15  # –£–º–µ–Ω—å—à–∏—Ç—å —à–∞–≥–∏ (-25% –≤—Ä–µ–º–µ–Ω–∏)
```

**–í–Ω–∏–º–∞–Ω–∏–µ**: –ö–∞—á–µ—Å—Ç–≤–æ –ª–∏—Ü–∞ —Å–Ω–∏–∑–∏—Ç—Å—è –¥–æ 6-7/10!

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–û—à–∏–±–∫–∞**: "OutOfMemoryError" –∏–ª–∏ "MPS allocation failed"

**–†–µ—à–µ–Ω–∏–µ 1**: –ó–∞–∫—Ä–æ–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
# –û—Å–≤–æ–±–æ–¥–∏—Ç–µ RAM (Activity Monitor ‚Üí Quit heavy apps)
```

**–†–µ—à–µ–Ω–∏–µ 2**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CPU fallback
```python
# config.py, —Å—Ç—Ä–æ–∫–∞ 46:
DEVICE = "cpu"  # –í–º–µ—Å—Ç–æ "mps"
```

**–í–Ω–∏–º–∞–Ω–∏–µ**: –ë—É–¥–µ—Ç –ù–ê–ú–ù–û–ì–û –º–µ–¥–ª–µ–Ω–Ω–µ–µ (~60 —Å–µ–∫—É–Ω–¥/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

---

### –ü—Ä–æ–±–ª–µ–º–∞: "OPENAI_API_KEY not set"

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π SDXL, OpenAI –∫–ª—é—á –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è GPT-4 (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –∏—Å—Ç–æ—Ä–∏–∏).

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ `.env`:
```bash
echo "OPENAI_API_KEY=sk-your-key-here" > .env
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑ GPT-4 (–±—É–¥—É—Ç placeholder stories).

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [FACE_CONSISTENCY.md](FACE_CONSISTENCY.md) - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ª–∏—Ü–∞ (4 —É—Ä–æ–≤–Ω—è)
- [SPEED_MODES.md](SPEED_MODES.md) - –†–µ–∂–∏–º—ã —Å–∫–æ—Ä–æ—Å—Ç–∏ (ULTRA_FAST, FAST, BALANCED, QUALITY)
- [IMPROVEMENTS_SUMMARY.md](IMPROVEMENTS_SUMMARY.md) - –í—Å–µ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –ü—Ä–æ–º–ø—Ç–æ–≤

### –ö–∞–∑–∞—Ö—Å–∫–∏–π —Ñ–æ–ª—å–∫–ª–æ—Ä:
```
Aldar Kose tricks a greedy khan in a palace
```

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è:
```
Aldar Kose teaches a lesson about sharing food in a village
```

### –ü–æ–µ–∑–¥–∫–∏:
```
Aldar Kose rides across the steppe on a small donkey
```

### –ò—Å—Ç–æ—Ä–∏–∏ —É –∫–æ—Å—Ç—Ä–∞:
```
Aldar Kose tells tales by campfire with children
```

---

## üî• –ì–æ—Ä—è—á–∏–µ –ö–ª–∞–≤–∏—à–∏

| –î–µ–π—Å—Ç–≤–∏–µ | –ö–ª–∞–≤–∏—à–∞ |
|----------|---------|
| –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å | `Enter` (–≤ textarea) |
| –ù–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ | `Shift + Enter` |
| –ù–æ–≤–∞—è –∏—Å—Ç–æ—Ä–∏—è | –ö–Ω–æ–ø–∫–∞ "Create New Story" |
| –°–∫–∞—á–∞—Ç—å –≤—Å—ë | –ö–Ω–æ–ø–∫–∞ "Download All Images" |

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –ó–∞–ø—É—Å–∫–∞

–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π:

- [ ] –¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω: `python3 test_face_consistency.py`
- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω: `python3 app.py`
- [ ] –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç: `http://localhost:8080`
- [ ] –†–µ—Ñ–µ—Ä–µ–Ω—Å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –º–µ—Å—Ç–µ: `aldar1.png`, `aldar2.png`, etc.
- [ ] –°–≤–æ–±–æ–¥–Ω–æ ‚â•8GB RAM (–¥–ª—è M1 Mac)

---

## üöÄ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ª–∏—Ü–∞: 95%+
- ‚úÖ –°–∫–æ—Ä–æ—Å—Ç—å: ~6-7 —Å–µ–∫/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ: 9.5/10
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã

**–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π!** üé®
